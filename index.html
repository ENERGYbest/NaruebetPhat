<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ผลงาน | นฤเบศ แพทย์ประสิทธิ์</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-dark: #0d1117;
            --container-bg: #161b22;
            --border-color: #30363d;
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --accent-color: #58a6ff;
            --accent-hover: #79c0ff;
            --shadow-color: rgba(0, 0, 0, 0.4);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        @keyframes move-blob-1 { 0%{transform:translate(0,0)} 50%{transform:translate(300px,150px)} 100%{transform:translate(0,0)} }
        @keyframes move-blob-2 { 0%{transform:translate(0,0)} 50%{transform:translate(-200px,-100px)} 100%{transform:translate(0,0)} }
        @keyframes move-blob-3 { 0%{transform:translate(0,0)} 50%{transform:translate(100px,-250px)} 100%{transform:translate(0,0)} }
        
        @keyframes twinkle { 0%{opacity:0.2} 50%{opacity:0.8} 100%{opacity:0.2} }
        @keyframes slide-in { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        
        /* --- (แก้ไข) เพิ่ม Keyframes สำหรับ Fade Animation --- */
        @keyframes fade-out { from { opacity: 1; } to { opacity: 0; } }
        @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }

        body {
            font-family: 'Kanit', sans-serif;
            min-height: 100vh;
            background-color: var(--bg-dark);
            color: var(--text-primary);
            display: flex; justify-content: center; align-items: center;
            padding: 2rem;
            overflow: hidden;
        }

        .background-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
        }
        .aurora-bg {
            position: absolute; top:0; left:0; width:100%; height:100%;
            filter: blur(120px); opacity: 0.7;
        }
        .blob { position: absolute; border-radius: 50%; }
        .blob.one { width: 400px; height: 400px; top: -100px; left: -100px; background: rgba(88,166,255,0.4); animation: move-blob-1 20s infinite alternate; }
        .blob.two { width: 300px; height: 300px; bottom: -50px; right: -50px; background: rgba(139,92,246,0.4); animation: move-blob-2 18s infinite alternate; }
        .blob.three { width: 250px; height: 250px; top: 50%; left: 40%; background: rgba(34,197,94,0.3); animation: move-blob-3 22s infinite alternate; }
        
        .stars-bg, .stars-bg-2 {
            position: absolute; top:0; left:0; width:100%; height:100%;
            background: transparent;
            animation: twinkle 5s infinite linear;
        }
        .stars-bg-2 { animation-duration: 8s; animation-delay: 2s; }
        .stars-bg:after, .stars-bg-2:after {
            content: "";
            position: absolute;
            width: 1px; height: 1px;
            background: white;
            box-shadow: 79vw 26vh 1px, 6vw 42vh 0px, 9vw 3vh 0px, 33vw 40vh 1px, 65vw 8vh 1px, 86vw 33vh 1px, 3vw 98vh 0px,
                        15vw 55vh 0px, 50vw 80vh 1px, 95vw 45vh 0px, 20vw 10vh 1px, 80vw 70vh 0px, 5vw 90vh 1px;
        }

        .portfolio-container {
            display: flex; width: 100%; max-width: 1200px;
            height: 80vh; max-height: 700px;
            background-color: rgba(22, 27, 34, 0.8);
            backdrop-filter: blur(12px);
            border-radius: 20px; border: 1px solid var(--border-color);
            box-shadow: 0 20px 50px var(--shadow-color);
            overflow: hidden;
            opacity: 0;
            animation: slide-in 1s 0.2s ease-out forwards;
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        .portfolio-container.page-exit { opacity: 0; transform: scale(0.95); }

        .spotlight-container { flex-basis: 65%; display: flex; flex-direction: column; position: relative; }
        .project-list-container { flex-basis: 35%; padding: 2rem 1rem 2rem 2rem; overflow-y: auto; border-left: 1px solid var(--border-color); background-color: rgba(13, 17, 23, 0.5); }
        
        .spotlight-image-wrapper { flex-grow: 1; overflow: hidden; position: relative; }
        #spotlight-image { width: 100%; height: 100%; object-fit: contain; }
        
        /* --- (แก้ไข) เพิ่มคลาสสำหรับควบคุมอนิเมชั่น Fade --- */
        #spotlight-image.fading {
            animation-duration: 0.5s;
            animation-fill-mode: forwards;
        }
        
        .spotlight-info { padding: 2rem; background: linear-gradient(to top, rgba(22, 27, 34, 1), transparent); position: absolute; bottom: 0; width: 100%; display: flex; justify-content: space-between; align-items: center; }
        #spotlight-title { font-size: 1.75rem; font-weight: 700; overflow: hidden; }
        .char { display: inline-block; transform: translateY(110%); transition: transform 0.5s cubic-bezier(0.22,1,0.36,1); }

        #spotlight-link {
            display: inline-block; background-color: var(--accent-color);
            color: var(--bg-dark); text-decoration: none;
            padding: 0.75rem 1.5rem; border-radius: 10px;
            font-weight: 700; transition: background-color 0.3s ease;
        }
        #spotlight-link:hover { background-color: var(--accent-hover); }
        .list-header {
            font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem;
            padding-bottom: 1rem; border-bottom: 1px solid var(--border-color);
        }
        .project-list-item {
            padding: 1rem; margin-bottom: 1rem; border-radius: 10px;
            cursor: pointer; transition: background-color 0.3s ease;
            color: var(--text-secondary);
        }
        .project-list-item:hover { background-color: rgba(88, 166, 255, 0.1); color: var(--text-primary); }
        .project-list-item.active { background-color: var(--accent-color); color: var(--bg-dark); font-weight: 500; }
        
        /* --- (แก้ไข) เพิ่ม CSS สำหรับ Custom Scrollbar --- */
        .project-list-container::-webkit-scrollbar {
            width: 8px;
        }
        .project-list-container::-webkit-scrollbar-track {
            background: transparent;
        }
        .project-list-container::-webkit-scrollbar-thumb {
            background-color: var(--border-color);
            border-radius: 10px;
            border: 2px solid var(--container-bg);
        }
        .project-list-container::-webkit-scrollbar-thumb:hover {
            background-color: var(--text-secondary);
        }

        /* === (แก้ไข) ส่วนของการทำ Responsive Design ให้สวยงาม === */
@media (max-width: 992px) {
    body {
        padding: 0; /* สำหรับหน้าจอมือถือ ให้ container เต็มจอ */
    }

    .portfolio-container {
        flex-direction: column; /* เปลี่ยนเป็นแนวตั้ง */
        height: 100vh;
        max-height: none;
        border-radius: 0;
        border: none;
    }

    .spotlight-container {
        height: 60vh; /* ให้ส่วนแสดงผลหลักสูง 60% ของหน้าจอ */
    }
    
    .spotlight-info {
        /* ลด padding ลงเล็กน้อยสำหรับจอแท็บเล็ต */
        padding: 1.5rem;
    }

    #spotlight-title {
        /* ลดขนาดฟอนต์หัวข้อหลัก */
        font-size: 1.5rem;
    }

    .project-list-container {
        flex-basis: auto; /* ไม่ต้องกำหนด flex-basis */
        height: 40vh; /* ให้ส่วนรายการสูง 40% ของหน้าจอ */
        border-left: none;
        border-top: 1px solid var(--border-color);
        /* ปรับ padding ให้เหมาะสม */
        padding: 1.5rem 1rem;
    }
    
    .list-header {
        /* ลดขนาดฟอนต์หัวข้อรายการ */
        font-size: 1.25rem;
        margin-bottom: 1rem;
    }
}

/* --- เพิ่มการปรับปรุงสำหรับหน้าจอมือถือที่เล็กลงมาอีก --- */
@media (max-width: 768px) {
    .spotlight-info {
        flex-direction: column; /* จัดเรียง Title และปุ่มในแนวตั้ง */
        align-items: flex-start; /* จัดชิดซ้าย */
        gap: 1rem; /* เพิ่มช่องว่างระหว่าง Title และปุ่ม */
    }

    #spotlight-title {
        font-size: 1.3rem; /* ลดขนาดฟอนต์ลงอีกสำหรับจอมือถือ */
    }

    #spotlight-link {
        /* ลดขนาดปุ่มเล็กน้อย */
        padding: 0.6rem 1.2rem;
    }
}
    </style>
</head>
<body>
    
    <div class="background-container">
        <div class="aurora-bg">
            <div class="blob one"></div>
            <div class="blob two"></div>
            <div class="blob three"></div>
        </div>
        <div class="stars-bg"></div>
        <div class="stars-bg-2"></div>
    </div>

    <div class="portfolio-container">
        <div class="spotlight-container">
            <div class="spotlight-image-wrapper">
                <img id="spotlight-image" src="" alt="">
            </div>
            <div class="spotlight-info">
                <h2 id="spotlight-title"></h2>
                <a id="spotlight-link" href="#" target="_blank">ดูผลงาน</a>
            </div>
        </div>
        <div class="project-list-container">
            <h3 class="list-header">รายการผลงาน</h3>
            <div id="project-list"></div>
        </div>
    </div>

    <script>
        const projects = [
            { title: "19-5-68 (ออกแบบ Layout หน้าเว็บไซต์)", image: "19-5-68/finish/1layout.png", link: "19-5-68/index.html" },
            { title: "22-5-68 (semantic element)", image: "22-5-68/finish/layout.png", link: "22-5-68/index2.html" },
            { title: "26-5-68 (การสร้างตาราง)", image: "26-5-68/finish/website.png", link: "26-5-68/index2.html" },
            { title: "29-5-68 (การสร้างฟอร์ม Login)", image: "29-5-68/finish/login web.png", link: "29-5-68/login.html" },
            { title: "5-6-68 (responsive layout flex box)", image: "5-6-68/finish/web tatc.png", link: "5-6-68/index2.html" },
            { title: "9-6-68 (การสร้าง Grid Layout)", image: "9-6-68/finish/2web.png", link: "9-6-68/index2.html" },
            { title: "16-6-68 (ออกแบบเว็บด้วย HTML และ CSS)", image: "16-6-68/finish/web.png", link: "16-6-68/index.html" },
            { title: "19-6-68 (สร้างวิทยาลัยเคนิคสัตหีบ)", image: "19-6-68 bootstrap/finish/web.png", link: "19-6-68-boostrap/index.html" }
        ];
        
        const portfolioContainer = document.querySelector('.portfolio-container');
        const projectList = document.getElementById('project-list');
        const spotlightImage = document.getElementById('spotlight-image');
        const spotlightTitle = document.getElementById('spotlight-title');
        const spotlightLink = document.getElementById('spotlight-link');
        let isAnimating = false;

        function animateTitle(newText = null) {
            const chars = spotlightTitle.querySelectorAll('.char');
            if (chars.length > 0) {
                chars.forEach((char, i) => {
                    char.style.transitionDelay = `${i * 15}ms`;
                    char.style.transform = 'translateY(110%)';
                });
            }
            if (newText) {
                setTimeout(() => {
                    spotlightTitle.innerHTML = '';
                    newText.split('').forEach(charText => {
                        const charSpan = document.createElement('span');
                        charSpan.className = 'char';
                        charSpan.textContent = charText === ' ' ? '\u00A0' : charText;
                        spotlightTitle.appendChild(charSpan);
                    });
                    setTimeout(() => {
                        const newChars = spotlightTitle.querySelectorAll('.char');
                        newChars.forEach((char, i) => {
                            char.style.transitionDelay = `${i * 25}ms`;
                            char.style.transform = 'translateY(0)';
                        });
                    }, 20);
                }, 300);
            }
        }

        function populateProjectList() {
            projects.forEach((project, index) => {
                const item = document.createElement('div');
                item.className = 'project-list-item';
                item.textContent = project.title;
                item.dataset.index = index;
                item.addEventListener('click', () => {
                    if(!item.classList.contains('active')) updateSpotlight(index)
                });
                projectList.appendChild(item);
            });
        }
        
        // --- (แก้ไข) อัปเดตฟังก์ชัน updateSpotlight ทั้งหมด ---
        function updateSpotlight(index) {
            if (isAnimating) return;
            isAnimating = true;

            const project = projects[index];

            // 1. สั่งให้ Title และรูปภาพปัจจุบันจางหายไป
            animateTitle();
            spotlightImage.style.animationName = 'fade-out';
            spotlightImage.classList.add('fading');

            // 2. ตั้งเวลาเพื่อเปลี่ยนข้อมูลหลังจากอนิเมชั่น fade-out ทำงานเสร็จ
            setTimeout(() => {
                // 2.1 อัปเดต Source ของรูปภาพและ Link
                spotlightImage.src = project.image;
                spotlightLink.href = project.link;

                // 2.2 อัปเดต Title พร้อมอนิเมชั่น
                animateTitle(project.title);

                // 2.3 สั่งให้รูปภาพใหม่ปรากฏขึ้น (Fade in)
                spotlightImage.style.animationName = 'fade-in';

                // อัปเดตคลาส active ในลิสต์รายการ
                document.querySelectorAll('.project-list-item').forEach(item => item.classList.remove('active'));
                document.querySelector(`.project-list-item[data-index='${index}']`).classList.add('active');

            }, 500); // ระยะเวลาต้องเท่ากับ animation-duration ใน CSS

            // 3. เมื่ออนิเมชั่นทั้งหมดเสร็จสิ้น
            setTimeout(() => {
                spotlightImage.classList.remove('fading'); // ลบคลาสเพื่อเตรียมพร้อมสำหรับครั้งถัดไป
                isAnimating = false; // ปลดล็อคการคลิก
            }, 1000); // ระยะเวลารวมของ fade-out (500ms) + fade-in (500ms)
        }

        spotlightLink.addEventListener('click', function(event) {
            event.preventDefault();
            const destinationUrl = this.href;
            portfolioContainer.classList.add('page-exit');
            setTimeout(() => { window.location.href = destinationUrl; }, 500);
        });

        function init() {
            populateProjectList();
            if (projects.length > 0) {
                const firstProject = projects[0];
                spotlightImage.src = firstProject.image;
                spotlightLink.href = firstProject.link;
                animateTitle(firstProject.title);
                document.querySelector(`.project-list-item[data-index='0']`).classList.add('active');
            }
        }
        
        init();
    </script>
</body>
</html>
